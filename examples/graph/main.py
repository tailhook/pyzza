from flash.display import Sprite
from graph import Parser, Drawer

graph_source = """
digraph finite_state_machine {
	graph [rankdir=LR, size="8,5"];
	node [shape=doublecircle];
	graph [bb="0,0,770,344"];
	LR_0 [pos="38,112", width="1.0556", height="1.0556"];
	LR_3 [pos="336,38", width="1.0556", height="1.0556"];
	LR_4 [pos="336,306", width="1.0556", height="1.0556"];
	LR_8 [pos="732,159", width="1.0556", height="1.0556"];
	LR_2 [shape=circle, pos="182,153", width="0.94444", height="0.94444"];
	LR_1 [shape=circle, pos="182,57", width="0.94444", height="0.94444"];
	LR_6 [shape=circle, pos="336,181", width="0.94444", height="0.94444"];
	LR_5 [shape=circle, pos="468,112", width="0.94444", height="0.94444"];
	LR_7 [shape=circle, pos="598,89", width="0.94444", height="0.94444"];
	LR_0 -> LR_2 [label="SS(B)", pos="e,149.29,143.69 74.71,122.45 94.474,128.08 118.95,135.05 139.53,140.91", lp="112,145.5"];
	LR_0 -> LR_1 [label="SS(S)", pos="e,149.76,69.313 73.596,98.404 93.818,90.68 119.24,80.97 140.38,72.895", lp="112,98.5"];
	LR_1 -> LR_3 [label="S($end)", pos="e,298.23,42.66 215.8,52.83 237.01,50.214 264.68,46.799 288.13,43.906", lp="257,59.5"];
	LR_2 -> LR_6 [label="SS(b)", pos="e,302.55,174.92 215.8,159.14 238.34,163.24 268.19,168.67 292.5,173.09", lp="257,178.5"];
	LR_2 -> LR_5 [label="SS(a)", pos="e,433.9,111.65 214.58,141.97 237.6,134.69 269.34,125.66 298,121 340.3,114.13 389.22,112.15 423.69,111.73", lp="336,129.5"];
	LR_2 -> LR_4 [label="S(A)", pos="e,308.86,279.04 206.4,177.24 232.02,202.69 272.51,242.92 301.41,271.63", lp="257,255.5"];
	LR_5 -> LR_7 [label="S(b)", pos="e,564.35,94.953 501.82,106.02 517.77,103.2 537,99.793 554.06,96.774", lp="533,111.5"];
	LR_5 -> LR_5 [label="S(a)", pos="e,480,143.99 456,143.99 455.88,155.06 459.88,164 468,164 473.46,164 477.06,159.96 478.79,153.96", lp="468,172.5"];
	LR_6 -> LR_6 [label="S(b)", pos="e,348.74,212.73 323.26,212.73 323.05,223.92 327.3,233 336,233 341.84,233 345.68,228.9 347.51,222.82", lp="336,241.5"];
	LR_6 -> LR_5 [label="S(a)", pos="e,437.86,127.76 366.28,165.17 384.9,155.44 408.93,142.88 428.97,132.4", lp="404,158.5"];
	LR_7 -> LR_8 [label="S(b)", pos="e,698.66,140.25 628.9,104.08 643.29,111.19 660.59,119.89 676,128 680.49,130.37 685.17,132.88 689.82,135.4", lp="663,136.5"];
	LR_7 -> LR_5 [label="S(a)", pos="e,494.58,90.437 565.66,78.323 551.44,75.186 534.68,73.627 520,78 514.3,79.697 508.65,82.238 503.29,85.181", lp="533,86.5"];
	LR_8 -> LR_6 [label="S(b)", pos="e,369.96,184.89 694.31,165.66 648.88,173.32 570.14,185.43 502,190 471.85,192.02 464.19,191.38 434,190 416.33,189.19 396.93,187.56 380.08,185.91", lp="533,196.5"];
	LR_8 -> LR_5 [label="S(a)", pos="e,501.24,119.91 694.3,153.7 651.78,147.51 580.65,136.5 520,124 517.15,123.41 514.22,122.79 511.26,122.15", lp="598,152.5"];
}
"""

@package('graph')
class Main(Sprite):
    def __init__(self):
        graph = Parser().parse(graph_source)
        Drawer(graph, self).draw()
